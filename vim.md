# Vim tips

## 进入与退出

`vim` 直接打开vim  
`vim filename` 创建并打开名为filename的文件  
`vim file` 打开文件  
`:open file` 在vim窗口内正常模式执行打开文件  
`:bn` 切换到下一个文件  
`:bp` 切换到上一个文件  
`:args` 查看当前打开的文件目录，正在编辑的文件用`[]`括起来  
`:e ftp://hostname/file` or `:e \\hostname\file` 查看远程文件  
`:wq` 保存并关闭  
`ZZ` 保存并关闭  
`:q!` 不保存关闭  
`:e!` 不保存重新打开文件  

## 窗口操作

`:split` or `:new` 打开一个新窗口  
`:split file` or `:new file` 在新窗口打开文件  
`:vsplit file` 纵向打开新窗口并打开文件  
`Ctrl` + `ww` 移动到下一个窗口  
`Ctrl` + `wj` 移动到上方的窗口  
`Ctrl` + `wk` 移动到下方的窗口  
`:close` 关闭当前窗口，不可对最后一个窗口使用  
`:q` 关闭当前窗口，如果是最后一个窗口则退出vim  
`:only` 关闭其他所有窗口  

## 移动操作

`h` 左移一个字符  
`j` 下移一行  
`k` 上移一行  
`l` 右移一个字符  
`^` 移动至行首  
`$` 移动至行尾  
`Ctrl` + `b` 前一页  
`Ctrl` + `f` 后一页  
`G` 移动到末行  
`1G` 移动到第一行  
`nG` 移动到第n行  
`H` 移动到首行  
`M` 移动到中间行  
`L` 移动到窗口最后一行  
`w` 移动到下一个单词词首  
`nw` 移动到下n个单词词首  
`e` 移动到下一个单词词尾  
`ne` 移动到下n个单词词尾  
`b` 移动到前一个单词词尾  
`gg` 回到文件头

### 句子移动

`)` 移动到下一句  
`(` 移动到上一句  
`3)` 移动到下3句  

### 段落移动

`{` 移动到上一个段落  
`}` 移动到下一个段落  
`3}` 移动到下3个段落  

### 滚动操作

`Ctrl` + `e` 向下滚动一行  
`Ctrl` + `y` 向上滚动一行  
`Ctrl` + `d` 向下滚动半屏  
`Ctrl` + `u` 向上滚动半屏  
`Ctrl` + `f` 向下滚动一屏  
`Ctrl` + `b` 向上滚动一屏  

## 插入操作

`i` 在当前位置插入  
`I` 在当前行首插入  
`a` 在当前位置后插入  
`A` 在当前行尾插入  
`o` 在当前行之后插入一行  
`O` 在当前行之前插入一行  

## 查找命令 

`/text` 查找text，按n健查找下一个，按N健查找前一个  
`?text` 查找text，反向查找，按n健查找下一个，按N健查找前一个  
`.*[]^%/?~$` 需要转义  
`:set ignorecase` 忽略大小写的查找  
`:set noignorecase` 不忽略大小写的查找  
__将光标移动到某个词上按`*`或`#`即可搜索该单词__  
`:set hlsearch` 高亮搜索结果，所有结果都高亮显示  
`:set nohlsearch` 关闭高亮搜索显示  
`:nohlsearch` 关闭当前的高亮显示，如果再次搜索或者按下n或N键，则会再次高亮   
`:set incsearch` 逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成  
`:set wrapscan` 重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启 

## 替换命令

`ra` 将当前字符替换为a，当期字符即光标所在字符  
`s/old/new/` 用old替换new，替换当前行的第一个匹配  
`s/old/new/g` 用old替换new，替换当前行的所有匹配  
`%s/old/new/` 用old替换new，替换所有行的第一个匹配  
`%s/old/new/g` 用old替换new，替换整个文件的所有匹配  
`:10,20 s/^/ /g` 在第10行知第20行每行前面加四个空格，用于缩进  
`ddp` 交换光标所在行和其下紧邻的一行  

## 撤销重做

`u` 撤销  
`U` 撤销对整行的操作  
`Ctrl` + `r` 重做  

## 删除  

`x` or `dl` 删除当前字符  
`nx` 删除当前光标开始向后n个字符  
`X` or `dh` 删除当前字符的前一个字符  
`dd` 删除当前行  
`dj` 删除上一行  
`dk` 删除下一行  
`nd` 删除当前行开始的n行  
`D` or `d$` 删除当前字符至行尾  
`kdgg` 删除当前行之前所有行（不包括当前行）  
`jdG`  删除当前行之后所有行（不包括当前行）  
`:1,10d` 删除1-10行  
`:11,$d` 删除11行及以后所有的行  
`:1,$d` 删除所有行  
`J` 删除两行之间的空行，实际上是合并两行  

## 剪切、拷贝与粘贴

`ndd` 剪切当前行之后的n行  
`:1,10d` 将1-10行剪切  
`:1,10 m 20` 将第1-10行移动到第20行之后    
`yy` 拷贝当前行  
`nyy` 拷贝当前后开始的n行  
`p` 在当前光标后粘贴  
`P` 在当前行前粘贴  
`:1,10 co 20` 将1-10行插入到第20行之后  
`:1,$ co $` 将整个文件复制一份并添加到文件尾部  
`ddp` 交换当前行和其下一行  
`xp` 交换当前字符和其后一个字符  

## 宏

`q`+`*` 按q键加任意字母开始录制，再按q键结束录制  
`@*` 使用宏  

## 注释 

`3,5 s/^/#/g` 注释第3-5行  
`3,5 s/^#//g` 解除3-5行的注释  
`1,$ s/^/#/g` 注释整个文档  
`:%s/^/#/g` 注释整个文档  

## shell

`:!command`
`:!ls` 列出当前目录下文件  
`:!perl -c script.pl` 检查perl脚本语法  
`:!perl script.pt` 执行perl脚本  
`suspend` or `Ctrl` + `Z`   挂起vim，回到shell,按`fg`可以返回vim  

## help

`:help` 显示整个帮助  
`:help command` 显示command的帮助  
`:help 'number'` Vim选项的帮助用单引号括起  
`:help <Esc>` 特殊键的帮助用<>括起  
`:help -t`  Vim启动参数的帮助用-  
`:help i_<Esc>` 插入模式下Esc的帮助  